

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>7. Results &mdash; ARMI-DIF3D Plugin 1.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="_static/sphinx-needs/libs/html/datatables.min.css" type="text/css" />
  <link rel="stylesheet" href="_static/sphinx-needs\common.css" type="text/css" />
  <link rel="stylesheet" href="_static/sphinx-needs\layouts.css" type="text/css" />
  <link rel="stylesheet" href="_static/sphinx-needs\modern.css" type="text/css" />
  <link rel="stylesheet" href="_static/sphinx-needs\styles.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx-needs/libs/html/datatables.min.js"></script>
        <script src="_static/sphinx-needs/libs/html/datatables_loader.js"></script>
        <script src="_static/sphinx-needs/libs/html/sphinx_needs_collapse.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="8. Test Report" href="testing.html" />
    <link rel="prev" title="6. Implementation and Developer Guide" href="implementation.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> ARMI-DIF3D Plugin
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="summary.html">1. Attribution</a></li>
<li class="toctree-l1"><a class="reference internal" href="summary.html#executive-summary">2. Executive Summary</a></li>
<li class="toctree-l1"><a class="reference internal" href="summary.html#introduction">3. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="user.html">4. User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="design.html">5. Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="implementation.html">6. Implementation and Developer Guide</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">7. Results</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#setup">7.1. Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="#system-eigenvalue">7.2. System eigenvalue</a></li>
<li class="toctree-l2"><a class="reference internal" href="#global-flux-distribution-and-reaction-rates">7.3. Global flux distribution and reaction rates</a></li>
<li class="toctree-l2"><a class="reference internal" href="#flux-spectra">7.4. Flux spectra</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="testing.html">8. Test Report</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">9. Apache License</a></li>
<li class="toctree-l1"><a class="reference internal" href=".apidocs/armicontrib.dif3d.html">10. API Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="demodocs/modules.html">11. Demonstration Application Docs</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ARMI-DIF3D Plugin</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li><span class="section-number">7. </span>Results</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/results.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="results">
<span id="sec-results"></span><h1><span class="section-number">7. </span>Results<a class="headerlink" href="#results" title="Permalink to this headline">¶</a></h1>
<p>The tests described in <a class="reference internal" href="testing.html"><span class="doc">Test Report</span></a> demonstrate the basic satisfaction of the design
requirements of the DIF3D-ARMI integration. To better showcase the full capabilities of
the DIF3D plugin, we also included a demonstration application (<code class="docutils literal notranslate"><span class="pre">dif3ddemo</span></code>)
that performs a realistic neutronics analysis of TerraPower’s open-source <a class="reference external" href="https://github.com/terrapower/fftf-isothermal-model">FFTF isothermal benchmark
model</a>. A detailed description of
this model can be found in the linked repository’s README, and in the original benchmark
description <a class="reference internal" href="#fftf" id="id1"><span>[FFTF]</span></a>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Due to the simple cross sections used, this section should not
be treated as a true benchmark evaluation of the FFTF, but it can certainly
serve as the foundation for one.</p>
</div>
<div class="section" id="setup">
<h2><span class="section-number">7.1. </span>Setup<a class="headerlink" href="#setup" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">dif3ddemo</span></code> application uses the open-source <a class="reference external" href="https://github.com/terrapower/dragon-armi-plugin">Dragon plugin</a> to compute microscopic cross
sections. In order to enable the Dragon and DIF3D interfaces for this case, the
following settings were added to the settings file, <code class="docutils literal notranslate"><span class="pre">FFTF.yaml</span></code></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">dif3dExePath</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">path/to/dif3d</span>
<span class="nt">writeDif3dDb</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="nt">dragonExePath</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">path/to/dragon</span>
<span class="nt">dragonDataPath</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">path/to/draglibendfb8r0SHEM361</span>
<span class="nt">neutronicsKernel</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">DIF3D-Nodal</span>
<span class="nt">globalFluxActive</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Neutron</span>
<span class="nt">xsKernel</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">DRAGON</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">path/to/X</span></code> points to the location of <code class="docutils literal notranslate"><span class="pre">X</span></code> on the target system.  The case was
then run with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">dif3ddemo</span> <span class="n">run</span> <span class="n">FFYF</span><span class="o">.</span><span class="n">yaml</span>
</pre></div>
</div>
<p>With the above additions to the settings, the <code class="docutils literal notranslate"><span class="pre">dif3ddemo</span></code> application performs the
following key operations:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Initialize the ARMI reactor model based on the blueprints contained in
<code class="docutils literal notranslate"><span class="pre">FFTF-blueprints.yaml</span></code>.</p></li>
<li><p>Compute microscopic cross sections for the two cross-section regions defined in the
blueprints.</p></li>
<li><p>Perform a DIF3D global flux solve.</p></li>
<li><p>Apply the results of the DIF3D solution to the ARMI reactor model.</p></li>
<li><p>Write the reactor state to a database file.</p></li>
</ol>
</div></blockquote>
<p>In the process of performing the DIF3D global flux solve, the
<a class="reference external" href="https://terrapower.github.io/armi/.apidocs/armi.reactor.converters.uniformMesh.html#armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter" title="(in ARMI v0.1.5)"><code class="docutils literal notranslate"><span class="pre">armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter</span></code></a> will
be used to impose a uniform axial mesh upon the ARMI reactor model. This is necessary,
because the as-input geometry features non-uniform axial meshes in its assembly designs,
and because DIF3D requires the axial mesh to be uniform across all assemblies. When the
DIF3D output is read, it is applied to this uniform-mesh reactor model, and the results
are mapped back to the non-uniform, as-input mesh. Since we have set the
<code class="docutils literal notranslate"><span class="pre">writeDif3dDb</span></code> setting to <code class="docutils literal notranslate"><span class="pre">True</span></code>, the DIF3D plugin will output an ARMI database
storing the uniform-mesh results, which represent the results from the DIF3D output
exactly. This database is useful for advanced comparison and debugging purposes, and
is shown below.</p>
</div>
<div class="section" id="system-eigenvalue">
<h2><span class="section-number">7.2. </span>System eigenvalue<a class="headerlink" href="#system-eigenvalue" title="Permalink to this headline">¶</a></h2>
<p>Before inspecting the output databases, we can observe the standard out to find some key
results from the DIF3D run:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[info] Found DIF3D output with:
        | keff= 0.9902642277622886
        | Dominance ratio= 0.0
        | Problem type= KEFF
        | Solution type= REAL
        | Restart= 0
        | Convergence= CONVERGED
</pre></div>
</div>
<p>Most notable is the reported system eigenvalue of 0.99026, which is 974 pcm below the
published benchmark value of 0.99930 +/- 0.0021. This discrepancy is unsurprising,
considering the rudimentary nature of the 0-D cross section treatment that is
implemented in the Dragon plugin, which in particular is known to give suboptimal
cross sections especially for the reflectors and shields.</p>
</div>
<div class="section" id="global-flux-distribution-and-reaction-rates">
<h2><span class="section-number">7.3. </span>Global flux distribution and reaction rates<a class="headerlink" href="#global-flux-distribution-and-reaction-rates" title="Permalink to this headline">¶</a></h2>
<p>Inspecting the global flux distribution and a handful of key reaction rates was done
before and after the mesh conversion between the uniform axial mesh that DIF3D uses and
the as-input, non-uniform axial mesh. In all of the figures that follow, we show a
planar cut through the reactor geometry that is shown in <a class="reference internal" href="#fig-cut"><span class="std std-numref">Fig. 7.1</span></a>. This
particular plane was chosen because it passes through the active core and several
non-fuel assemblies.</p>
<div class="figure align-default" id="id5">
<span id="fig-cut"></span><img alt="_images/fftf-layout-cut.png" src="_images/fftf-layout-cut.png" />
<p class="caption"><span class="caption-number">Fig. 7.1 </span><span class="caption-text">Core layout of the FFTF reactor, as configured for the benchmark. The red line
indicates the plane along which subsequent data are extracted. The core layout image
was produced using ARMI’s built-in grid editor.</span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</div>
<p><a class="reference internal" href="#fig-flux"><span class="std std-numref">Fig. 7.2</span></a> shows the total flux distribution on both meshes for the plane cut
described above. A notable feature of the remapped flux in this case is the considerable
amount of flux smearing in the in-core shim (ICS) assembly, which is very roughly-meshed
in the input specifications. In circumstances where accurate flux (or any other
parameter) values are needed, the axial mesh for this assembly would need to be refined.</p>
<div class="figure align-default" id="id6">
<span id="fig-flux"></span><img alt="_images/totalFlux.png" src="_images/totalFlux.png" />
<p class="caption"><span class="caption-number">Fig. 7.2 </span><span class="caption-text">Total neutron flux distribution on the as-input mesh (right), and the ARMI-converted
uniform axial mesh (left). The uniform axial mesh flux is the same geometry that
DIF3D uses, and the flux is directly read in from the DIF3D output. The non-uniform
mesh stores flux values that ARMI has mapped back to the original mesh.</span><a class="headerlink" href="#id6" title="Permalink to this image">¶</a></p>
</div>
<p><a class="reference internal" href="#fig-abs"><span class="std std-numref">Fig. 7.3</span></a> shows the total absorption rate within each block. Unlike the flux
itself, which is mapped directly between grids, reaction rates such as this one are
computed on the as-input mesh using the remapped flux and the macroscopic cross
sections for the reaction of interest for each block.</p>
<div class="figure align-default" id="id7">
<span id="fig-abs"></span><img alt="_images/rateAbs.png" src="_images/rateAbs.png" />
<p class="caption"><span class="caption-number">Fig. 7.3 </span><span class="caption-text">Total absorption rate.</span><a class="headerlink" href="#id7" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="flux-spectra">
<h2><span class="section-number">7.4. </span>Flux spectra<a class="headerlink" href="#flux-spectra" title="Permalink to this headline">¶</a></h2>
<p>Two flux spectra were measured in the FFTF reactor and reported in <a class="reference internal" href="#fftf" id="id2"><span>[FFTF]</span></a>, at the core
midplane, and 80cm below the core midplane by detectors located in the in-reactor
thimble assembly. In addition to those measured experimentally, spectra were computed
using MCNP, also reported in <a class="reference internal" href="#fftf" id="id3"><span>[FFTF]</span></a>. <a class="reference internal" href="#fig-midplane"><span class="std std-numref">Fig. 7.4</span></a> and <a class="reference internal" href="#fig-lower1"><span class="std std-numref">Fig. 7.5</span></a>
plot the measured and MCNP-computed spectra against the spectra computed by ARMI-DIF3D.
In all cases, the spectra are normalized to a peak flux value of unity; this rudimentary
normalization approach was chosen due the large difference in energy bin width and total
energy domain between ARMI’s default 33-group energy structure and the group structure
reported in <a class="reference internal" href="#fftf" id="id4"><span>[FFTF]</span></a>.</p>
<p>In general, the ARMI-DIF3D results show good agreement with the MCNP results. However,
especially in the lower axial region, both MCNP and ARMI-DIF3D predict a harder spectrum
than was measured. This discrepency was not analyzed further in this project.
In general, the ARMI-DIF3D spectra agree relatively well with the
MCNP spectra, though some of the flux peaks are poorly represented.</p>
<p>Employing a finer group structure should better resolve these. However, the Dragon code
used to produce the cross sections for this case is not conducive to much-finer energy
group structures.  Future work to produce an MC²-3 ARMI plugin will permit such
fine-group cross-section libraries.</p>
<div class="figure align-default" id="id8">
<span id="fig-midplane"></span><img alt="_images/midplane_flux.png" src="_images/midplane_flux.png" />
<p class="caption"><span class="caption-number">Fig. 7.4 </span><span class="caption-text">Flux spectra at core midplane in the in-reactor thimble assembly. ARMI/DIF3D
spectrum is compared against the published experimental and MCNP-calculated spectra.</span><a class="headerlink" href="#id8" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-default" id="id9">
<span id="fig-lower1"></span><img alt="_images/lower_flux_1.png" src="_images/lower_flux_1.png" />
<p class="caption"><span class="caption-number">Fig. 7.5 </span><span class="caption-text">Flux spectra at 80cm below the core midplane in the in-reactor thimble assembly.
ARMI/DIF3D spectrum is compared against the published experimental and
MCNP-calculated spectra.</span><a class="headerlink" href="#id9" title="Permalink to this image">¶</a></p>
</div>
<dl class="citation">
<dt class="label" id="fftf"><span class="brackets">FFTF</span><span class="fn-backref">(<a href="#id1">1</a>,<a href="#id2">2</a>,<a href="#id3">3</a>,<a href="#id4">4</a>)</span></dt>
<dd><p><a class="reference external" href="https://digital.library.unt.edu/ark:/67531/metadc1013078/">https://digital.library.unt.edu/ark:/67531/metadc1013078/</a></p>
</dd>
</dl>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="testing.html" class="btn btn-neutral float-right" title="8. Test Report" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="implementation.html" class="btn btn-neutral float-left" title="6. Implementation and Developer Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, TerraPower, LLC.
      <span class="lastupdated">
        Last updated on 2021-04-09.
      </span>

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>