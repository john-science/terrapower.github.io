

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>armi.bookkeeping.db package &mdash; ARMI 0.1.4 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/armiicon_16x16.ico"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_fixes.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="armi.bookkeeping.db.compareDB module" href="armi.bookkeeping.db.compareDB.html" />
    <link rel="prev" title="armi.bookkeeping package" href="armi.bookkeeping.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> ARMI
          

          
            
            <img src="../_static/armiicon_24x24.ico" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.1.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/index.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index.html">Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release/index.html">Release Notes</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">API Docs</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="armi.html">armi package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="armi.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="armi.bookkeeping.html">armi.bookkeeping package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.cases.html">armi.cases package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.cli.html">armi.cli package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.localization.html">armi.localization package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.materials.html">armi.materials package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.nucDirectory.html">armi.nucDirectory package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.nuclearDataIO.html">armi.nuclearDataIO package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.operators.html">armi.operators package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.physics.html">armi.physics package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.reactor.html">armi.reactor package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.scripts.html">armi.scripts package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.settings.html">armi.settings package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.utils.html">armi.utils package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="armi.html#submodules">Submodules</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ARMI</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="modules.html">armi</a> &raquo;</li>
        
          <li><a href="armi.html">armi package</a> &raquo;</li>
        
          <li><a href="armi.bookkeeping.html">armi.bookkeeping package</a> &raquo;</li>
        
      <li>armi.bookkeeping.db package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/.apidocs/armi.bookkeeping.db.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="module-armi.bookkeeping.db">
<span id="armi-bookkeeping-db-package"></span><h1>armi.bookkeeping.db package<a class="headerlink" href="#module-armi.bookkeeping.db" title="Permalink to this headline">¶</a></h1>
<p>The db package is responsible for reading and writing the state of the reactor to/from disk.</p>
<p>As an ARMI run progresses, this is periodically updated as the primary output file.
It can also be an input file for follow-on analysis or restart runs.</p>
<p>The database can be visualized through various tools such as XTVIEW.</p>
<p>This module contains factories for selecting and building DB-related objects.</p>
<div class="section" id="some-notes-on-versions">
<h2>Some notes on versions<a class="headerlink" href="#some-notes-on-versions" title="Permalink to this headline">¶</a></h2>
<p>Persistent storage of ARMI models has seen many changes throughout the years.
Calculation results were originally stored on a SQL database (version 1), which has been
fully deprecated at this point.</p>
<p>Version 2 was the first to use HDF5 as the primary storage format. This was beneficial,
as it did not rely on any external infrastructure to operate, and benefited from the
suite of tools that help interact with HDF5 files. It was eventually replaced because
it did not store a complete model of the reactor, but rather a ghost of assembly, block,
and reactor parameters that could be applied to an existing reactor model (so long as
the dimensions were consistent!). This led to loading reactors being inconvenient and
error-prone, and also posed a limitation for representing more complex systems that have
non-core components.</p>
<p>Version 3 was created to make the schema more flexible and to permit storing the entire
reactor model within the HDF5 file. All objects in the ARMI Composite Model are written
to the database, and the model can be recovered in its entirety just from the HDF5 file.
Since it’s inception, it has seen a number of tweaks to improve its functionality and
fix bugs.</p>
<p>Being a serialization format, the code associated with reading and writing database
files may not benefit from Don’t Repeat Yourself (DRY) practices in the same way as
other code. Therefore, we do not share much code between different major versions of the
databases. Minor revisions (e.g. M.(N+1)) to the database structure should be simple
enough that specialized logic can be used to support all minor versions without posing a
maintenance burden. A detailed change log should be maintained of each minor revision.</p>
<dl class="function">
<dt id="armi.bookkeeping.db.loadOperator">
<code class="sig-prename descclassname">armi.bookkeeping.db.</code><code class="sig-name descname">loadOperator</code><span class="sig-paren">(</span><em class="sig-param">pathToDb</em>, <em class="sig-param">loadCycle</em>, <em class="sig-param">loadNode</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db.html#loadOperator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.bookkeeping.db.loadOperator" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an operator given the path to a database.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pathToDb</strong> (<em>str</em>) – The path of the database to load from.</p></li>
<li><p><strong>loadCycle</strong> (<em>int</em>) – The cycle to load the reactor state from.</p></li>
<li><p><strong>loadNode</strong> (<em>int</em>) – The time node to load the reactor from.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><code class="xref py py-func docutils literal notranslate"><span class="pre">armi.operator.Operator.loadState()</span></code></dt><dd><p>A method for loading reactor state that is useful if you already have an operator and a reactor object. loadOperator varies in that it supplies these given only a database file. loadState should be used if you are in the middle of an ARMI calculation and need load a different time step.</p>
</dd>
</dl>
</div>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<p>The operator will have a reactor attached that is loaded to the specified cycle
and node. The operator will not be in the same state that it was at that cycle and
node, only the reactor.</p>
</div>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">o</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">loadOperator</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;pathToDatabase&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">r</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cs</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">cs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">timeNode</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">getFPMass</span><span class="p">()</span>  <span class="c1"># Note since it is loaded from step 1 there are fission products.</span>
<span class="go">12345.67</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="armi.bookkeeping.db.copyDatabase">
<code class="sig-prename descclassname">armi.bookkeeping.db.</code><code class="sig-name descname">copyDatabase</code><span class="sig-paren">(</span><em class="sig-param">r</em>, <em class="sig-param">srcDB</em>, <em class="sig-param">tarDB</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db.html#copyDatabase"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.bookkeeping.db.copyDatabase" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the information stored in the source database to the target database</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>r</strong> (<em>reactor</em>) – This reactor should correspond to the data model housed in the srcDB</p></li>
<li><p><strong>srcDB</strong> (<em>database</em>) – Any implementation of the database in ARMI</p></li>
<li><p><strong>tarDB</strong> (<em>database</em>) – Any implementation of the database in ARMI</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="armi.bookkeeping.db.convertDatabase">
<code class="sig-prename descclassname">armi.bookkeeping.db.</code><code class="sig-name descname">convertDatabase</code><span class="sig-paren">(</span><em class="sig-param">inputDBName: str</em>, <em class="sig-param">outputDBName: Optional[str] = None</em>, <em class="sig-param">outputVersion: Optional[str] = None</em>, <em class="sig-param">nodes: Optional[List[Tuple[int</em>, <em class="sig-param">int]]] = None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db.html#convertDatabase"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.bookkeeping.db.convertDatabase" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert database files between different versions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inputDB</strong> – name of the complete hierarchy database</p></li>
<li><p><strong>outputDB</strong> – name of the output database that should be consistent with XTView</p></li>
<li><p><strong>outputVersion</strong> – version of the database to convert to. Defaults to latest version</p></li>
<li><p><strong>nodes</strong> – optional list of specific (cycle,node)s to convert</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="armi.bookkeeping.db.compareDB.html">armi.bookkeeping.db.compareDB module</a></li>
<li class="toctree-l1"><a class="reference internal" href="armi.bookkeeping.db.compareDB3.html">armi.bookkeeping.db.compareDB3 module</a></li>
<li class="toctree-l1"><a class="reference internal" href="armi.bookkeeping.db.database.html">armi.bookkeeping.db.database module</a></li>
<li class="toctree-l1"><a class="reference internal" href="armi.bookkeeping.db.database3.html">armi.bookkeeping.db.database3 module</a><ul>
<li class="toctree-l2"><a class="reference internal" href="armi.bookkeeping.db.database3.html#minor-revision-changelog">Minor revision changelog</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="armi.bookkeeping.db.factory.html">armi.bookkeeping.db.factory module</a></li>
<li class="toctree-l1"><a class="reference internal" href="armi.bookkeeping.db.permissions.html">armi.bookkeeping.db.permissions module</a></li>
<li class="toctree-l1"><a class="reference internal" href="armi.bookkeeping.db.types.html">armi.bookkeeping.db.types module</a></li>
<li class="toctree-l1"><a class="reference internal" href="armi.bookkeeping.db.xtviewDB.html">armi.bookkeeping.db.xtviewDB module</a></li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="armi.bookkeeping.db.compareDB.html" class="btn btn-neutral float-right" title="armi.bookkeeping.db.compareDB module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="armi.bookkeeping.html" class="btn btn-neutral float-left" title="armi.bookkeeping package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2009-2020, TerraPower, LLC
      <span class="lastupdated">
        Last updated on 2020-04-10.
      </span>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>