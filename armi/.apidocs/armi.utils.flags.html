

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>armi.utils.flags module &mdash; ARMI 0.1 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/armiicon_16x16.ico"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="armi.utils.hexagon module" href="armi.utils.hexagon.html" />
    <link rel="prev" title="armi.utils.dynamicImporter module" href="armi.utils.dynamicImporter.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> ARMI
          

          
            
            <img src="../_static/armiicon_24x24.ico" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/index.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index.html">Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release/index.html">Release Notes</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">API Docs</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="armi.html">armi package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="armi.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="armi.bookkeeping.html">armi.bookkeeping package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.cases.html">armi.cases package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.cli.html">armi.cli package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.localization.html">armi.localization package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.materials.html">armi.materials package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.nucDirectory.html">armi.nucDirectory package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.nuclearDataIO.html">armi.nuclearDataIO package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.operators.html">armi.operators package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.physics.html">armi.physics package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.reactor.html">armi.reactor package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.scripts.html">armi.scripts package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.settings.html">armi.settings package</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="armi.utils.html">armi.utils package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="armi.html#submodules">Submodules</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ARMI</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="modules.html">armi</a> &raquo;</li>
        
          <li><a href="armi.html">armi package</a> &raquo;</li>
        
          <li><a href="armi.utils.html">armi.utils package</a> &raquo;</li>
        
      <li>armi.utils.flags module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/.apidocs/armi.utils.flags.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="module-armi.utils.flags">
<span id="armi-utils-flags-module"></span><h1>armi.utils.flags module<a class="headerlink" href="#module-armi.utils.flags" title="Permalink to this headline">¶</a></h1>
<p>A Flag class, similar to <code class="docutils literal notranslate"><span class="pre">enum.Flag</span></code>.</p>
<p>This is an alternate implementation of the standard-library <code class="docutils literal notranslate"><span class="pre">enum.Flag</span></code> class. We use
this to implement <a class="reference internal" href="armi.reactor.flags.html#armi.reactor.flags.Flags" title="armi.reactor.flags.Flags"><code class="xref py py-class docutils literal notranslate"><span class="pre">armi.reactor.flags.Flags</span></code></a>. We used to use the
standard-library implementation, but that became limiting when we wanted to make it
possible for plugins to define their own flags; the standard implementation does not
support extension. We also considered the <code class="docutils literal notranslate"><span class="pre">aenum</span></code> package, which permits extension of
<code class="docutils literal notranslate"><span class="pre">Enum</span></code> classes, but unfortunately does not support extension of <code class="docutils literal notranslate"><span class="pre">Flags</span></code>. So, we had to
make our own. This is a much simplified version of what comes with <code class="docutils literal notranslate"><span class="pre">aenum</span></code>, but still
provides most of the safety and functionality.</p>
<p>There is an <a class="reference external" href="https://bitbucket.org/stoneleaf/aenum/issues/27/">issue</a> on the <code class="docutils literal notranslate"><span class="pre">aenum</span></code>
bitbucket site to track <code class="docutils literal notranslate"><span class="pre">Flag</span></code> extension.</p>
<dl class="class">
<dt id="armi.utils.flags.auto">
<em class="property">class </em><code class="sig-prename descclassname">armi.utils.flags.</code><code class="sig-name descname">auto</code><a class="reference internal" href="../_modules/armi/utils/flags.html#auto"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.utils.flags.auto" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Empty class for requesting a lazily-evaluated automatic field value.</p>
<p>This can be used to automatically provision a value for a field, when the specific
value does not matter.</p>
<p>In the future, it would be nice to support some arithmetic for these so that
automatically-derived combinations of other automatically defined fields can be
specified as well.</p>
</dd></dl>

<dl class="class">
<dt id="armi.utils.flags.Flag">
<em class="property">class </em><code class="sig-prename descclassname">armi.utils.flags.</code><code class="sig-name descname">Flag</code><span class="sig-paren">(</span><em class="sig-param">init=0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/utils/flags.html#Flag"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.utils.flags.Flag" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A collection of bitwise flags.</p>
<p>This is intended to emulate <code class="docutils literal notranslate"><span class="pre">enum.Flag</span></code>, except with the possibility of extension
after the class has been defined. Most docs for <code class="docutils literal notranslate"><span class="pre">enum.Flag</span></code> should be relevant here,
but there are sure to be occasional differences.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Python features arbitrary-width integers, allowing one to represent an
practically unlimited number of fields. <em>However</em>, including more flags than can
be represented in the system-native integer types may lead to strange behavior
when interfacing with non-pure Python code. For instance, exceeding 64 fields
makes the underlying value not trivially-storable in an HDF5 file. If we ever
want to store flags in an HDF5 file, we will need to develop some method of
encoding these when they are too wide.</p>
</div>
<dl class="method">
<dt id="armi.utils.flags.Flag.extend">
<em class="property">classmethod </em><code class="sig-name descname">extend</code><span class="sig-paren">(</span><em class="sig-param">fields: Dict[str, Union[int, armi.utils.flags.auto]]</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/utils/flags.html#Flag.extend"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.utils.flags.Flag.extend" title="Permalink to this definition">¶</a></dt>
<dd><p>Extend the Flags object with new fields.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This alters the class that it is called upon! Existing instances should see
the new data, since classes are mutable.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fields</strong> (<em>dict</em>) – A dictionary containing field names as keys, and their desired values, or
an instance of <code class="docutils literal notranslate"><span class="pre">auto</span></code> as values.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">MyFlags</span><span class="p">(</span><span class="n">Flags</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">FOO</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
<span class="gp">... </span>    <span class="n">BAR</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">... </span>    <span class="n">BAZ</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">MyFlags</span><span class="o">.</span><span class="n">extend</span><span class="p">({</span>
<span class="gp">... </span>    <span class="s2">&quot;SUPER&quot;</span><span class="p">:</span> <span class="n">auto</span><span class="p">()</span>
<span class="gp">... </span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">MyFlags</span><span class="o">.</span><span class="n">SUPER</span><span class="p">)</span>
<span class="go">&lt;MyFlags.SUPER: 8&gt;</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="armi.utils.flags.Flag.__invert__">
<code class="sig-name descname">__invert__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/utils/flags.html#Flag.__invert__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.utils.flags.Flag.__invert__" title="Permalink to this definition">¶</a></dt>
<dd><p>Implement unary ~.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is avoiding just ~ on the <code class="docutils literal notranslate"><span class="pre">_value</span></code> because it might not be safe.
Using the int directly is slightly dangerous in that python ints are not of
fixed width, so the result of inverting one Flag might not be as wide as the
result of inverting another Flag. Typically, one would want to invert a Flag to
create a mask for unsetting a bit on another Flag, like <code class="docutils literal notranslate"><span class="pre">f1</span> <span class="pre">&amp;=</span> <span class="pre">~f2</span></code>. If <code class="docutils literal notranslate"><span class="pre">f2</span></code> is
narrower than <code class="docutils literal notranslate"><span class="pre">f1</span></code> the field of ones that you need to keep <code class="docutils literal notranslate"><span class="pre">f1</span></code> bits on might
not cover the width of <code class="docutils literal notranslate"><span class="pre">f1</span></code>, erroneously turning off its upper bits. Not sure if
this was an issue before or not. Once things are working, might make sense to
play with this more.</p>
</div>
</dd></dl>

</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="armi.utils.hexagon.html" class="btn btn-neutral float-right" title="armi.utils.hexagon module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="armi.utils.dynamicImporter.html" class="btn btn-neutral float-left" title="armi.utils.dynamicImporter module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2009-2019, TerraPower, LLC
      <span class="lastupdated">
        Last updated on 2019-11-01.
      </span>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>