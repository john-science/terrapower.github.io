

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta property="og:title" content="armi.utils.textProcessors module" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://terrapower.github.io/armi/.apidocs/armi.utils.textProcessors.html" />
  <meta property="og:site_name" content="Advanced Reactor Modeling Interface" />
  <meta property="og:description" content="Utility classes and functions for manipulating text files." />
  <meta property="og:image" content="https://terrapower.github.io/armi/_static/armiSchematicView.png" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>armi.utils.textProcessors module &mdash; ARMI 0.1.4 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_fixes.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery-binder.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery-dataframe.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/armiicon_16x16.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="armi.utils.triangle module" href="armi.utils.triangle.html" />
    <link rel="prev" title="armi.utils.properties module" href="armi.utils.properties.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #233C5B" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> ARMI
          

          
            
            <img src="../_static/armiicon_24x24.ico" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.1.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gallery/index.html">Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/index.html">User Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index.html">Developer Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../blog/index.html">News</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release/index.html">Release Notes</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">API Docs</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="armi.html">armi package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="armi.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="armi.bookkeeping.html">armi.bookkeeping package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.cases.html">armi.cases package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.cli.html">armi.cli package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.localization.html">armi.localization package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.materials.html">armi.materials package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.nucDirectory.html">armi.nucDirectory package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.nuclearDataIO.html">armi.nuclearDataIO package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.operators.html">armi.operators package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.physics.html">armi.physics package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.reactor.html">armi.reactor package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.scripts.html">armi.scripts package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.settings.html">armi.settings package</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="armi.utils.html">armi.utils package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="armi.html#submodules">Submodules</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ARMI</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="modules.html">armi</a> &raquo;</li>
        
          <li><a href="armi.html">armi package</a> &raquo;</li>
        
          <li><a href="armi.utils.html">armi.utils package</a> &raquo;</li>
        
      <li>armi.utils.textProcessors module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/terrapower/armi/blob/master/doc/.apidocs/armi.utils.textProcessors.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="module-armi.utils.textProcessors">
<span id="armi-utils-textprocessors-module"></span><h1>armi.utils.textProcessors module<a class="headerlink" href="#module-armi.utils.textProcessors" title="Permalink to this headline">¶</a></h1>
<p>Utility classes and functions for manipulating text files.</p>
<dl class="py class">
<dt id="armi.utils.textProcessors.FileMark">
<em class="property">class </em><code class="sig-prename descclassname">armi.utils.textProcessors.</code><code class="sig-name descname">FileMark</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fName</span></em>, <em class="sig-param"><span class="n">line</span></em>, <em class="sig-param"><span class="n">column</span></em>, <em class="sig-param"><span class="n">relativeTo</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/utils/textProcessors.html#FileMark"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.utils.textProcessors.FileMark" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
</dd></dl>

<dl class="py function">
<dt id="armi.utils.textProcessors._processIncludes">
<code class="sig-prename descclassname">armi.utils.textProcessors.</code><code class="sig-name descname">_processIncludes</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">src</span></em>, <em class="sig-param"><span class="n">out</span></em>, <em class="sig-param"><span class="n">includes</span><span class="p">:</span> <span class="n">List<span class="p">[</span>Tuple<span class="p">[</span>pathlib.Path<span class="p">, </span><a class="reference internal" href="#armi.utils.textProcessors.FileMark" title="armi.utils.textProcessors.FileMark">armi.utils.textProcessors.FileMark</a><span class="p">]</span><span class="p">]</span></span></em>, <em class="sig-param"><span class="n">root</span></em>, <em class="sig-param"><span class="n">indentation</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">currentFile</span><span class="o">=</span><span class="default_value">'&lt;stream&gt;'</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/utils/textProcessors.html#_processIncludes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.utils.textProcessors._processIncludes" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the workhorse of <code class="docutils literal notranslate"><span class="pre">resolveMarkupInclusions</span></code> and friends.</p>
<p>Recursively inserts the contents of !included YAML files into the output stream,
keeping track of indentation and a list of included files along the way.</p>
</dd></dl>

<dl class="py function">
<dt id="armi.utils.textProcessors.resolveMarkupInclusions">
<code class="sig-prename descclassname">armi.utils.textProcessors.</code><code class="sig-name descname">resolveMarkupInclusions</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">src</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>TextIO<span class="p">, </span>pathlib.Path<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">root</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>pathlib.Path<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; _io.StringIO<a class="reference internal" href="../_modules/armi/utils/textProcessors.html#resolveMarkupInclusions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.utils.textProcessors.resolveMarkupInclusions" title="Permalink to this definition">¶</a></dt>
<dd><p>Process a text stream, appropriately handling <code class="docutils literal notranslate"><span class="pre">!include</span></code> tags.</p>
<p>This will take the passed IO stream or file path, replacing any instances of
<code class="docutils literal notranslate"><span class="pre">!include</span> <span class="pre">[path]</span></code> with the appropriate contents of the <code class="docutils literal notranslate"><span class="pre">!include</span></code> file.</p>
<p>What is returned is a new text stream, containing the contents of all of the files
stitched together.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>src</strong> (<em>TextIOBase</em><em> or </em><em>Path</em>) – If a Path is provided, read text from there. If is stream is provided, consume
text from the stream. If a stream is provided, <code class="docutils literal notranslate"><span class="pre">root</span></code> must also be provided.</p></li>
<li><p><strong>root</strong> (<em>Optional Path</em>) – The root directory to use for resolving relative paths in !include tags. If a
stream is provided for <code class="docutils literal notranslate"><span class="pre">src</span></code>, <code class="docutils literal notranslate"><span class="pre">root</span></code> must be provided. Otherwise, the
directory containing the <code class="docutils literal notranslate"><span class="pre">src</span></code> path will be used by default.</p></li>
</ul>
</dd>
</dl>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<p>While the use of <code class="docutils literal notranslate"><span class="pre">!include</span></code> appears as though it would invoke some sort of special
custom YAML constructor code, this does not do that. Processing these inclusions as
part of the document parsing/composition that comes with pyyaml or ruamel.yaml could
work, but has a number of prohibitive drawbacks (or at least reasons why it might
not be worth doing). Using a custom constructor is more-or-less supported by
ruamel.yaml (which we do use, as it is what underpins the yamlize package), but it
carries limitations about how anchors and aliases can cross included-file
boundaries. Getting around this requires either monkey-patching ruamel.yaml, or
subclassing it, which in turn would require monkey-patching yamlize.</p>
<p>Instead, we treat the <code class="docutils literal notranslate"><span class="pre">!include</span></code>s as a sort of pre-processor directive, which
essentially pastes the contents of the <code class="docutils literal notranslate"><span class="pre">!include</span></code>d file into the location of the
<code class="docutils literal notranslate"><span class="pre">!include</span></code>. The result is a text stream containing the entire contents, with all
<code class="docutils literal notranslate"><span class="pre">!include</span></code>s resolved. The only degree of sophistication lies in how indentation
is handled; since YAML cares about indentation to keep track of object hierarchy,
care must be taken that the included file contents are indented appropriately.</p>
<p>To precisely describe how the indentation works, it helps to have some definitions:</p>
<blockquote>
<div><ul class="simple">
<li><p>Included file: The file specified in the <code class="docutils literal notranslate"><span class="pre">!include</span> <span class="pre">[Included</span> <span class="pre">file]</span></code></p></li>
<li><p>Including line: The line that actually contains the <code class="docutils literal notranslate"><span class="pre">!include</span> <span class="pre">[Included</span> <span class="pre">file]</span></code></p></li>
<li><p>Meaningful YAML content: Text in a YAML file that is not either indentation or a
special character like “-“, “:” or “?”.</p></li>
</ul>
</div></blockquote>
<p>The contents of the included file will be indented such that that the first
character of each line in the included file will be found at the first column in the
including line that contains meaningful YAML content. The only exception is the
first line of the included file, which starts at the location of the <code class="docutils literal notranslate"><span class="pre">!include</span></code>
itself and is not deliberately indented.</p>
<p>In the future, we may wish to do the more sophisticated processing of the
<code class="docutils literal notranslate"><span class="pre">!include</span></code>s as part of the YAML parse. For future reference, there is some pure
gold on that topic here:
<a class="reference external" href="https://stackoverflow.com/questions/44910886/pyyaml-include-file-and-yaml-aliases-anchors-references">https://stackoverflow.com/questions/44910886/pyyaml-include-file-and-yaml-aliases-anchors-references</a></p>
</div>
</dd></dl>

<dl class="py function">
<dt id="armi.utils.textProcessors._getRootFromSrc">
<code class="sig-prename descclassname">armi.utils.textProcessors.</code><code class="sig-name descname">_getRootFromSrc</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">src</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>TextIO<span class="p">, </span>pathlib.Path<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">root</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>pathlib.Path<span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; pathlib.Path<a class="reference internal" href="../_modules/armi/utils/textProcessors.html#_getRootFromSrc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.utils.textProcessors._getRootFromSrc" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="armi.utils.textProcessors.findYamlInclusions">
<code class="sig-prename descclassname">armi.utils.textProcessors.</code><code class="sig-name descname">findYamlInclusions</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">src</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>TextIO<span class="p">, </span>pathlib.Path<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">root</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>pathlib.Path<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span>Tuple<span class="p">[</span>pathlib.Path<span class="p">, </span><a class="reference internal" href="#armi.utils.textProcessors.FileMark" title="armi.utils.textProcessors.FileMark">armi.utils.textProcessors.FileMark</a><span class="p">]</span><span class="p">]</span><a class="reference internal" href="../_modules/armi/utils/textProcessors.html#findYamlInclusions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.utils.textProcessors.findYamlInclusions" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list containing all of the !included YAML files from a root file.</p>
<p>This will attempt to “normalize” relative paths to the passed root. If that is not
possible, then an absolute path will be used instead. For example, if a file (A)
!includes another file (B) by an absolute path, which in turn !includes more files
relative to (B), all of (B)’s relative includes will be turned into absolute paths
from the perspective of the root file (A).</p>
</dd></dl>

<dl class="py function">
<dt id="armi.utils.textProcessors._resolveMarkupInclusions">
<code class="sig-prename descclassname">armi.utils.textProcessors.</code><code class="sig-name descname">_resolveMarkupInclusions</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">src</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>TextIO<span class="p">, </span>pathlib.Path<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">root</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>pathlib.Path<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; Tuple<span class="p">[</span>_io.StringIO<span class="p">, </span>List<span class="p">[</span>Tuple<span class="p">[</span>pathlib.Path<span class="p">, </span><a class="reference internal" href="#armi.utils.textProcessors.FileMark" title="armi.utils.textProcessors.FileMark">armi.utils.textProcessors.FileMark</a><span class="p">]</span><span class="p">]</span><span class="p">]</span><a class="reference internal" href="../_modules/armi/utils/textProcessors.html#_resolveMarkupInclusions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.utils.textProcessors._resolveMarkupInclusions" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="armi.utils.textProcessors.SequentialReader">
<em class="property">class </em><code class="sig-prename descclassname">armi.utils.textProcessors.</code><code class="sig-name descname">SequentialReader</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filePath</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/utils/textProcessors.html#SequentialReader"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.utils.textProcessors.SequentialReader" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Fast sequential reader that must be used within a with statement.</p>
<dl class="py attribute">
<dt id="armi.utils.textProcessors.SequentialReader.line">
<code class="sig-name descname">line</code><a class="headerlink" href="#armi.utils.textProcessors.SequentialReader.line" title="Permalink to this definition">¶</a></dt>
<dd><p>value of the current line</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="armi.utils.textProcessors.SequentialReader.match">
<code class="sig-name descname">match</code><a class="headerlink" href="#armi.utils.textProcessors.SequentialReader.match" title="Permalink to this definition">¶</a></dt>
<dd><p>value of the current match</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>re.match</p>
</dd>
</dl>
</dd></dl>

<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<p>This reader will sequentially search a file for a regular expression pattern or
string depending on the method used. When the pattern/string is matched/found, the
reader will stop, return <code class="code docutils literal notranslate"><span class="pre">True</span></code>, and set the attributes <code class="code docutils literal notranslate"><span class="pre">line</span></code> and
<code class="code docutils literal notranslate"><span class="pre">match</span></code>.</p>
<p>This pattern makes it easy to cycle through repetitive output in a very fast manner.
For example, if you had a text file with consistent chuncks of information that
always started with the same text followed by information, you could do something
like this:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">SequentialReader</span><span class="p">(</span><span class="s1">&#39;somefile&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">sr</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">... </span>    <span class="k">while</span> <span class="n">sr</span><span class="o">.</span><span class="n">searchForText</span><span class="p">(</span><span class="s1">&#39;start of data chunk&#39;</span><span class="p">):</span>
<span class="gp">... </span>        <span class="c1"># this needs to repeat for as many chunks as there are.</span>
<span class="gp">... </span>        <span class="k">if</span> <span class="n">sr</span><span class="o">.</span><span class="n">searchForPatternOnNextLine</span><span class="p">(</span><span class="s1">&#39;some-(?P&lt;data&gt;\w+)-pattern&#39;</span><span class="p">):</span>
<span class="gp">... </span>            <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sr</span><span class="o">.</span><span class="n">match</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<dl class="py method">
<dt id="armi.utils.textProcessors.SequentialReader.issueWarningOnFindingText">
<code class="sig-name descname">issueWarningOnFindingText</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">text</span></em>, <em class="sig-param"><span class="n">warning</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/utils/textProcessors.html#SequentialReader.issueWarningOnFindingText"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.utils.textProcessors.SequentialReader.issueWarningOnFindingText" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a text search for every line of the file, if the text is found the specified warning will be issued.</p>
<p>This is important for determining if issues occurred while searching for text.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>text</strong> (<em>str</em>) – text to find within the file</p></li>
<li><p><strong>warning</strong> (<em>str</em>) – An warning message to issue.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#armi.utils.textProcessors.SequentialReader.raiseErrorOnFindingText" title="armi.utils.textProcessors.SequentialReader.raiseErrorOnFindingText"><code class="xref py py-meth docutils literal notranslate"><span class="pre">raiseErrorOnFindingText()</span></code></a>, <a class="reference internal" href="#armi.utils.textProcessors.SequentialReader.raiseErrorOnFindingPattern" title="armi.utils.textProcessors.SequentialReader.raiseErrorOnFindingPattern"><code class="xref py py-meth docutils literal notranslate"><span class="pre">raiseErrorOnFindingPattern()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="armi.utils.textProcessors.SequentialReader.raiseErrorOnFindingText">
<code class="sig-name descname">raiseErrorOnFindingText</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">text</span></em>, <em class="sig-param"><span class="n">error</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/utils/textProcessors.html#SequentialReader.raiseErrorOnFindingText"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.utils.textProcessors.SequentialReader.raiseErrorOnFindingText" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a text search for every line of the file, if the text is found the specified error will be raised.</p>
<p>This is important for determining if errors occurred while searching for text.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>text</strong> (<em>str</em>) – text to find within the file</p></li>
<li><p><strong>error</strong> (<em>Exception</em>) – An exception to raise.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#armi.utils.textProcessors.SequentialReader.raiseErrorOnFindingPattern" title="armi.utils.textProcessors.SequentialReader.raiseErrorOnFindingPattern"><code class="xref py py-meth docutils literal notranslate"><span class="pre">raiseErrorOnFindingPattern()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="armi.utils.textProcessors.SequentialReader.raiseErrorOnFindingPattern">
<code class="sig-name descname">raiseErrorOnFindingPattern</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pattern</span></em>, <em class="sig-param"><span class="n">error</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/utils/textProcessors.html#SequentialReader.raiseErrorOnFindingPattern"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.utils.textProcessors.SequentialReader.raiseErrorOnFindingPattern" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a pattern search for every line of the file, if the pattern is found the specified error will be raised.</p>
<p>This is important for determining if errors occurred while searching for text.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pattern</strong> (<em>str</em>) – regular expression pattern</p></li>
<li><p><strong>error</strong> (<em>Exception</em>) – An exception to raise.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#armi.utils.textProcessors.SequentialReader.raiseErrorOnFindingText" title="armi.utils.textProcessors.SequentialReader.raiseErrorOnFindingText"><code class="xref py py-meth docutils literal notranslate"><span class="pre">raiseErrorOnFindingText()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="armi.utils.textProcessors.SequentialReader.searchForText">
<code class="sig-name descname">searchForText</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">text</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/utils/textProcessors.html#SequentialReader.searchForText"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.utils.textProcessors.SequentialReader.searchForText" title="Permalink to this definition">¶</a></dt>
<dd><p>Search the file for the next occurrence of <code class="code docutils literal notranslate"><span class="pre">text</span></code>, and set the
<code class="code docutils literal notranslate"><span class="pre">self.line</span></code> attribute to that line’s value if it matched.</p>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<p>This will search the file line by line until it finds the text.  This sets the
attribute <code class="code docutils literal notranslate"><span class="pre">self.line</span></code>. If the previous <code class="code docutils literal notranslate"><span class="pre">_searchFor*</span></code> method did not
match, the last line it did not match will be searched first.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>matched</strong> – Boolean inidcating whether or not the pattern matched</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="armi.utils.textProcessors.SequentialReader.searchForPattern">
<code class="sig-name descname">searchForPattern</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pattern</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/utils/textProcessors.html#SequentialReader.searchForPattern"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.utils.textProcessors.SequentialReader.searchForPattern" title="Permalink to this definition">¶</a></dt>
<dd><p>Search the file for the next occurece of <code class="code docutils literal notranslate"><span class="pre">pattern</span></code> and set the <code class="code docutils literal notranslate"><span class="pre">self.line</span></code> attribute to that
line’s value if it matched.</p>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<p>This will search the file line by line until it finds the pattern.
This sets the attribute <code class="code docutils literal notranslate"><span class="pre">self.line</span></code>. If the previous <code class="code docutils literal notranslate"><span class="pre">_searchFor*</span></code>
method did not match, the last line it did not match will be searched first.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>matched</strong> – Boolean inidcating whether or not the pattern matched</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="armi.utils.textProcessors.SequentialReader.searchForPatternOnNextLine">
<code class="sig-name descname">searchForPatternOnNextLine</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pattern</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/utils/textProcessors.html#SequentialReader.searchForPatternOnNextLine"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.utils.textProcessors.SequentialReader.searchForPatternOnNextLine" title="Permalink to this definition">¶</a></dt>
<dd><p>Search the next line for a given pattern, and set the <code class="code docutils literal notranslate"><span class="pre">self.line</span></code> attribute to that line’s value if it
matched.</p>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<p>This sets the attribute <code class="code docutils literal notranslate"><span class="pre">self.line</span></code>. If the previous <code class="code docutils literal notranslate"><span class="pre">_searchFor*</span></code>
method did not match, the last line it did not match will be searched first.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>matched</strong> – Boolean inidcating whether or not the pattern matched</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="armi.utils.textProcessors.SequentialReader._readLine">
<code class="sig-name descname">_readLine</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/utils/textProcessors.html#SequentialReader._readLine"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.utils.textProcessors.SequentialReader._readLine" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="armi.utils.textProcessors.SequentialReader.consumeLine">
<code class="sig-name descname">consumeLine</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/utils/textProcessors.html#SequentialReader.consumeLine"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.utils.textProcessors.SequentialReader.consumeLine" title="Permalink to this definition">¶</a></dt>
<dd><p>Consumes the line.</p>
<p>This is necessary when searching for the same pattern repetitively, because
otherwise searchForPatternOnNextLine would not work.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="armi.utils.textProcessors.SequentialStringIOReader">
<em class="property">class </em><code class="sig-prename descclassname">armi.utils.textProcessors.</code><code class="sig-name descname">SequentialStringIOReader</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">stringIO</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/utils/textProcessors.html#SequentialStringIOReader"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.utils.textProcessors.SequentialStringIOReader" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#armi.utils.textProcessors.SequentialReader" title="armi.utils.textProcessors.SequentialReader"><code class="xref py py-class docutils literal notranslate"><span class="pre">armi.utils.textProcessors.SequentialReader</span></code></a></p>
<p>Fast sequential reader that must be used within a with statement.</p>
<dl class="py attribute">
<dt id="armi.utils.textProcessors.SequentialStringIOReader.line">
<code class="sig-name descname">line</code><a class="headerlink" href="#armi.utils.textProcessors.SequentialStringIOReader.line" title="Permalink to this definition">¶</a></dt>
<dd><p>value of the current line</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="armi.utils.textProcessors.SequentialStringIOReader.match">
<code class="sig-name descname">match</code><a class="headerlink" href="#armi.utils.textProcessors.SequentialStringIOReader.match" title="Permalink to this definition">¶</a></dt>
<dd><p>value of the current match</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>re.match</p>
</dd>
</dl>
</dd></dl>

<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<p>This reader will sequentially search a file for a regular expression pattern or
string depending on the method used. When the pattern/string is matched/found, the
reader will stop, return <code class="code docutils literal notranslate"><span class="pre">True</span></code>, and set the attributes <code class="code docutils literal notranslate"><span class="pre">line</span></code> and
<code class="code docutils literal notranslate"><span class="pre">match</span></code>.</p>
<p>This pattern makes it easy to cycle through repetitive output in a very fast manner.
For example, if you had a text file with consistent chuncks of information that
always started with the same text followed by information, you could do something
like this:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">SequentialReader</span><span class="p">(</span><span class="s1">&#39;somefile&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">sr</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">... </span>    <span class="k">while</span> <span class="n">sr</span><span class="o">.</span><span class="n">searchForText</span><span class="p">(</span><span class="s1">&#39;start of data chunk&#39;</span><span class="p">):</span>
<span class="gp">... </span>        <span class="c1"># this needs to repeat for as many chunks as there are.</span>
<span class="gp">... </span>        <span class="k">if</span> <span class="n">sr</span><span class="o">.</span><span class="n">searchForPatternOnNextLine</span><span class="p">(</span><span class="s1">&#39;some-(?P&lt;data&gt;\w+)-pattern&#39;</span><span class="p">):</span>
<span class="gp">... </span>            <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sr</span><span class="o">.</span><span class="n">match</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<dl class="py method">
<dt id="armi.utils.textProcessors.SequentialStringIOReader.__enter__">
<code class="sig-name descname">__enter__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/utils/textProcessors.html#SequentialStringIOReader.__enter__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.utils.textProcessors.SequentialStringIOReader.__enter__" title="Permalink to this definition">¶</a></dt>
<dd><p>Override to prevent trying to open/reopen a StringIO object.</p>
<p>We don’t need to override <code class="code docutils literal notranslate"><span class="pre">__exit__</span></code>, because it doesn’t care if closing
the object fails.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="armi.utils.textProcessors.TextProcessor">
<em class="property">class </em><code class="sig-prename descclassname">armi.utils.textProcessors.</code><code class="sig-name descname">TextProcessor</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fname</span></em>, <em class="sig-param"><span class="n">highMem</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/utils/textProcessors.html#TextProcessor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.utils.textProcessors.TextProcessor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A general text processing object that extends python’s abilities to scan through huge files.</p>
<p>Use this instead of a raw file object to read data out of output files, etc.</p>
<dl class="py attribute">
<dt id="armi.utils.textProcessors.TextProcessor.scipat">
<code class="sig-name descname">scipat</code><em class="property"> = '[+-]?\\d*\\.\\d+[eEdD][+-]\\d+'</em><a class="headerlink" href="#armi.utils.textProcessors.TextProcessor.scipat" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="armi.utils.textProcessors.TextProcessor.number">
<code class="sig-name descname">number</code><em class="property"> = '[+-]?\\d+\\.*\\d*'</em><a class="headerlink" href="#armi.utils.textProcessors.TextProcessor.number" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="armi.utils.textProcessors.TextProcessor.decimal">
<code class="sig-name descname">decimal</code><em class="property"> = '[+-]?\\d*\\.\\d+'</em><a class="headerlink" href="#armi.utils.textProcessors.TextProcessor.decimal" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="armi.utils.textProcessors.TextProcessor.reset">
<code class="sig-name descname">reset</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/utils/textProcessors.html#TextProcessor.reset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.utils.textProcessors.TextProcessor.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>rewinds the file so you can search through it again</p>
</dd></dl>

<dl class="py method">
<dt id="armi.utils.textProcessors.TextProcessor.errorChecking">
<code class="sig-name descname">errorChecking</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">checkForErrors</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/utils/textProcessors.html#TextProcessor.errorChecking"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.utils.textProcessors.TextProcessor.errorChecking" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="armi.utils.textProcessors.TextProcessor.checkErrors">
<code class="sig-name descname">checkErrors</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">line</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/utils/textProcessors.html#TextProcessor.checkErrors"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.utils.textProcessors.TextProcessor.checkErrors" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="armi.utils.textProcessors.TextProcessor.fsearch">
<code class="sig-name descname">fsearch</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pattern</span></em>, <em class="sig-param"><span class="n">msg</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">killOn</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">textFlag</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/utils/textProcessors.html#TextProcessor.fsearch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.utils.textProcessors.TextProcessor.fsearch" title="Permalink to this definition">¶</a></dt>
<dd><p>Searches file f for pattern and displays msg when found. Returns line in which
pattern is found or FALSE if no pattern is found.
Stops searching if finds killOn first</p>
<p>If you specify textFlag=True, the search won’t use a regular expression (and
can’t). The basic result is you get less powerful matching capabilities at a
huge speedup (10x or so probably, but that’s just a guess.) pattern and killOn
must be pure text if you do this.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="armi.utils.textProcessors.SmartList">
<em class="property">class </em><code class="sig-prename descclassname">armi.utils.textProcessors.</code><code class="sig-name descname">SmartList</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">f</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/utils/textProcessors.html#SmartList"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.utils.textProcessors.SmartList" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A list that does stuff like files do i.e. remembers where it was, can seek, etc.
Actually this is pretty slow. so much for being smart. nice idea though.</p>
<dl class="py method">
<dt id="armi.utils.textProcessors.SmartList.next">
<code class="sig-name descname">next</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/utils/textProcessors.html#SmartList.next"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.utils.textProcessors.SmartList.next" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="armi.utils.textProcessors.SmartList.seek">
<code class="sig-name descname">seek</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">line</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/utils/textProcessors.html#SmartList.seek"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.utils.textProcessors.SmartList.seek" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="armi.utils.textProcessors.SmartList.close">
<code class="sig-name descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/utils/textProcessors.html#SmartList.close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.utils.textProcessors.SmartList.close" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="armi.utils.triangle.html" class="btn btn-neutral float-right" title="armi.utils.triangle module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="armi.utils.properties.html" class="btn btn-neutral float-left" title="armi.utils.properties module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2009-2020, TerraPower, LLC
      <span class="lastupdated">
        Last updated on 2020-09-29.
      </span>

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>