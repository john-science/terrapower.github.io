

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta property="og:title" content="Build Reactor Inputs Programmatically" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://terrapower.github.io/armi/gallery/framework/run_programmaticReactorDefinition.html" />
  <meta property="og:site_name" content="Advanced Reactor Modeling Interface" />
  <meta property="og:description" content="Sometimes it’s desirable to build input definitions for ARMI using code rather than by writing the textual input files directly. In ARMI you can either make the ARMI reactor objects directly, or yo..." />
  <meta property="og:image" content="https://terrapower.github.io/armi/_static/armiSchematicView.png" />
  <meta property="og:image:alt" content="Advanced Reactor Modeling Interface" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Build Reactor Inputs Programmatically &mdash; ARMI 0.1.5 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/theme_fixes.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/gallery-binder.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/gallery-dataframe.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/armiicon_16x16.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Plot a reactor facemap" href="run_reactorFacemap.html" />
    <link rel="prev" title="Listing of Material Library" href="run_materials.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #233C5B" >
          

          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> ARMI
          

          
            
            <img src="../../_static/armiicon_24x24.ico" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.1.5
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user/index.html">User Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/index.html">Developer Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../blog/index.html">News</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../.apidocs/modules.html">API Docs</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">ARMI</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Gallery</a> &raquo;</li>
        
      <li>Build Reactor Inputs Programmatically</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/terrapower/armi/blob/master/doc/gallery/framework/run_programmaticReactorDefinition.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p>Click <a class="reference internal" href="#sphx-glr-download-gallery-framework-run-programmaticreactordefinition-py"><span class="std std-ref">here</span></a>     to download the full example code</p>
</div>
<div class="sphx-glr-example-title section" id="build-reactor-inputs-programmatically">
<span id="sphx-glr-gallery-framework-run-programmaticreactordefinition-py"></span><h1>Build Reactor Inputs Programmatically<a class="headerlink" href="#build-reactor-inputs-programmatically" title="Permalink to this headline">¶</a></h1>
<p>Sometimes it’s desirable to build input definitions for ARMI using
code rather than by writing the textual input files directly.
In ARMI you can either make the ARMI reactor objects directly,
or you can define Blueprints objects. The benefit of making Blueprints
objects is that they can in turn be used to create both ARMI reactor
objects as well as textual input itself. This is nice when you want to
have traceable input files associated with a run that was developed
programmatically (e.g. for parameter sweeps).</p>
<p>This example shows how to make Blueprints objects programmatically completely
from scratch.</p>
<img alt="Assembly Designs for None" class="sphx-glr-single-img" src="../../_images/sphx_glr_run_programmaticReactorDefinition_001.png" />
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>=========== Case Information ===========
[info] ---------------------  ------------------------------------------------------------------------------
       Case Title:            scripted-case
       Case Description:
       Run Type:              Standard - Operator
       Current User:          ntouran
       ARMI Location:         C:\Users\ntouran\codes\armi-framework\armi
       Working Directory:     C:\Users\ntouran\codes\armi-framework\doc\gallery-src\framework
       Python Interpreter:    3.9.0 (tags/v3.9.0:9cf6752, Oct  5 2020, 15:34:40) [MSC v.1927 64 bit (AMD64)]
       Master Machine:        TP010267
       Number of Processors:  1
       Date and Time:         Wed Dec 16 12:39:11 2020
       ---------------------  ------------------------------------------------------------------------------
=========== Input File Information ===========
[info] -------------  ------------------  ------------
       Input Type     Path                SHA-1 Hash
       -------------  ------------------  ------------
       Case Settings  scripted-case.yaml  4caf9567c7
       Blueprints                         MISSING
       Geometry                           MISSING
       -------------  ------------------  ------------
=========== Reactor Cycle Information ===========
[info] ---------------------------  -------
       Reactor Thermal Power (MW):    0
       Number of Cycles:              1
       Cycle Lengths:               365.242
       Availability Factors:          1
       Power Fractions:               1
       ---------------------------  -------
=========== Constructing Reactor and Verifying Inputs ===========
[info] Constructing the `core`
=========== Adding Assemblies to &lt;Core: core id:2444335363072&gt; ===========
[info] Will expand CR, FE, MO, NI, SI, ZR, HE, NA, MN, W elementals to have natural isotopics
[info] Nuclides truncating the burn-chain:  LFP35, LFP40, DUMP1, LFP39, DUMP2, LFP38, LFP41
[info] Constructing assembly `Fuel`
[warn] No component matched Flags.WIRE in &lt;reflector BxxxA at ExCore XS: A BU GP: A&gt;. Returning None
[warn] No component matched Flags.CLAD in &lt;reflector BxxxA at ExCore XS: A BU GP: A&gt;. Returning None
[info] Constructing assembly `Reflector`
=========== Verifying Assembly Configurations ===========
=========== Summarizing Source of Material Data for &lt;Core: core id:2444335363072&gt; ===========
[info] ---------------  -----------------  ----------------------------
       Material Name    Source Location    Property Data was Modified
                                           from the Source?
       ---------------  -----------------  ----------------------------
       Custom Material  ARMI               False
       HT9              ARMI               False
       Sodium           ARMI               False
       Void             ARMI               False
       ---------------  -----------------  ----------------------------
=========== Applying Geometry Modifications ===========
[info] Updating spatial grid pitch data for hex geometry
=========== Initializing Mesh, Assembly Zones, and Nuclide Categories ===========
[warn] The system has no heavy metal and therefore is not a nuclear reactor.
       Please make sure that this is intended and not a input error.
[info] Nuclide categorization for cross section temperature assignments:
       ------------------  ------------------------------------------------------------
       Nuclide Category    Nuclides
       ------------------  ------------------------------------------------------------
       Fuel                U238, ZR90, HE4, ZR91, ZR92, DUMP1, PU239, NP237, B10,
                           CM243, U234, LFP40, PU236, AM242, U235, CM242, AM243, PU238,
                           U236, CM245, ZR94, LFP39, CM244, DUMP2, CM247, LFP41, CM246,
                           LFP35, AM241, PU242, B11, NP238, PU241, LFP38, PU240, ZR96
       Coolant             NA23
       Structure           V, MO100, SI29, MO92, C, MO98, FE58, SI30,
                           W182, MN55, W183, NI61, W184, CR52, NI62, W186,
                           FE56, CR50, NI58, MO95, FE54, NI64, FE57,
                           MO94, MO97, MO96, CR54, NI60, SI28, CR53
       ------------------  ------------------------------------------------------------
[info] Assembly zone definitions:
       --------  ------  ------------  -----------------------------------------  ----------  ------
           Zone                                                                     Symmetry  Hot
         Number  Name      Assemblies  Locations                                      Factor  Zone
       --------  ------  ------------  -----------------------------------------  ----------  ------
              1  ring-1            21  A1001, A2001, A2002, A3001, A3002, A3003,           3  False
                                       A3012, A4001, A4002, A4003, A4004,
                                       A4005, A4018, A5001, A5002, A5003,
                                       A5004, A5005, A5006, A5023, A5024
       --------  ------  ------------  -----------------------------------------  ----------  ------
[info] The setting `splitZones` is enabled. Building subzones from core zones:
       --------  ------------------  ----------  ------------  --------------------------  ----------  ------
           Zone                      Original                                                Symmetry  Hot
         Number  Name                Name          Assemblies  Locations                       Factor  Zone
       --------  ------------------  ----------  ------------  --------------------------  ----------  ------
              1  ring-1-Reflector-5  ring-1                 4  A5023, A4018, A3001, A2002           3  False
              2  ring-1-Fuel-5       ring-1                 3  A3012, A1001, A2001                  3  False
       --------  ------------------  ----------  ------------  --------------------------  ----------  ------
=========== Interface Stack Summary  ===========
[info] -------  ------------------------  ---------------  ----------  ---------  -----------  ------------
         Index  Type                      Name             Function    Enabled    EOL order    BOL forced
       -------  ------------------------  ---------------  ----------  ---------  -----------  ------------
            01  Main                      main                         Yes        Reversed     No
            02  FissionProductModel       fissionProducts              Yes        Normal       No
            03  CrossSectionGroupManager  xsGroups                     Yes        Normal       No
            04  HistoryTracker            history                      Yes        Normal       No
            05  Report                    report                       Yes        Normal       No
            06  Database                  database                     Yes        Normal       No
            07  MemoryProfiler            memoryProfiler               Yes        Normal       No
            08  Snapshot                  snapshot                     Yes        Normal       No
       -------  ------------------------  ---------------  ----------  ---------  -----------  ------------
===========  Triggering Init Event ===========
=========== 01 - main                           Init            ===========
=========== 02 - fissionProducts                Init            ===========
=========== 03 - xsGroups                       Init            ===========
=========== 04 - history                        Init            ===========
=========== 05 - report                         Init            ===========
=========== 06 - database                       Init            ===========
=========== 07 - memoryProfiler                 Init            ===========
=========== 08 - snapshot                       Init            ===========
===========  Completed Init Event ===========
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">armi</span>

<span class="n">armi</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">permissive</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1"># pylint: disable=wrong-import-position</span>
<span class="kn">from</span> <span class="nn">armi.reactor</span> <span class="kn">import</span> <span class="n">blueprints</span>
<span class="kn">from</span> <span class="nn">armi.settings</span> <span class="kn">import</span> <span class="n">caseSettings</span>
<span class="kn">from</span> <span class="nn">armi.reactor.blueprints</span> <span class="kn">import</span> <span class="n">isotopicOptions</span>
<span class="kn">from</span> <span class="nn">armi.reactor.blueprints</span> <span class="kn">import</span> <span class="n">assemblyBlueprint</span>
<span class="kn">from</span> <span class="nn">armi.reactor.blueprints</span> <span class="kn">import</span> <span class="n">blockBlueprint</span>
<span class="kn">from</span> <span class="nn">armi.reactor.blueprints</span> <span class="kn">import</span> <span class="n">componentBlueprint</span>
<span class="kn">from</span> <span class="nn">armi.reactor.blueprints</span> <span class="kn">import</span> <span class="n">gridBlueprint</span>
<span class="kn">from</span> <span class="nn">armi.reactor.blueprints</span> <span class="kn">import</span> <span class="n">reactorBlueprint</span>
<span class="kn">from</span> <span class="nn">armi.utils</span> <span class="kn">import</span> <span class="n">plotting</span>
<span class="kn">from</span> <span class="nn">armi</span> <span class="kn">import</span> <span class="n">cases</span>


<span class="k">def</span> <span class="nf">buildCase</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Build input components and a case.&quot;&quot;&quot;</span>
    <span class="n">bp</span> <span class="o">=</span> <span class="n">blueprints</span><span class="o">.</span><span class="n">Blueprints</span><span class="p">()</span>
    <span class="n">bp</span><span class="o">.</span><span class="n">customIsotopics</span> <span class="o">=</span> <span class="n">isotopicOptions</span><span class="o">.</span><span class="n">CustomIsotopics</span><span class="p">()</span>
    <span class="n">bp</span><span class="o">.</span><span class="n">nuclideFlags</span> <span class="o">=</span> <span class="n">isotopicOptions</span><span class="o">.</span><span class="n">genDefaultNucFlags</span><span class="p">()</span>

    <span class="n">components</span> <span class="o">=</span> <span class="n">buildComponents</span><span class="p">()</span>
    <span class="n">bp</span><span class="o">.</span><span class="n">blockDesigns</span> <span class="o">=</span> <span class="n">buildBlocks</span><span class="p">(</span><span class="n">components</span><span class="p">)</span>
    <span class="n">bp</span><span class="o">.</span><span class="n">assemDesigns</span> <span class="o">=</span> <span class="n">buildAssemblies</span><span class="p">(</span><span class="n">bp</span><span class="o">.</span><span class="n">blockDesigns</span><span class="p">)</span>
    <span class="n">bp</span><span class="o">.</span><span class="n">gridDesigns</span> <span class="o">=</span> <span class="n">buildGrids</span><span class="p">()</span>
    <span class="n">bp</span><span class="o">.</span><span class="n">systemDesigns</span> <span class="o">=</span> <span class="n">buildSystems</span><span class="p">()</span>

    <span class="n">cs</span> <span class="o">=</span> <span class="n">caseSettings</span><span class="o">.</span><span class="n">Settings</span><span class="p">()</span>
    <span class="n">cs</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">cs</span><span class="o">.</span><span class="n">caseTitle</span> <span class="o">=</span> <span class="s2">&quot;scripted-case&quot;</span>
    <span class="n">case</span> <span class="o">=</span> <span class="n">cases</span><span class="o">.</span><span class="n">Case</span><span class="p">(</span><span class="n">cs</span><span class="o">=</span><span class="n">cs</span><span class="p">,</span> <span class="n">bp</span><span class="o">=</span><span class="n">bp</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">case</span>


<span class="k">def</span> <span class="nf">buildComponents</span><span class="p">():</span>
    <span class="n">ISOTHERMAL_TEMPERATURE_IN_C</span> <span class="o">=</span> <span class="mf">450.0</span>
    <span class="n">fuel</span> <span class="o">=</span> <span class="n">componentBlueprint</span><span class="o">.</span><span class="n">ComponentBlueprint</span><span class="p">()</span>
    <span class="n">fuel</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;fuel&quot;</span>
    <span class="n">fuel</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span> <span class="s2">&quot;Circle&quot;</span>
    <span class="n">fuel</span><span class="o">.</span><span class="n">mult</span> <span class="o">=</span> <span class="mi">217</span>
    <span class="n">fuel</span><span class="o">.</span><span class="n">material</span> <span class="o">=</span> <span class="s2">&quot;Custom&quot;</span>
    <span class="n">fuel</span><span class="o">.</span><span class="n">Tinput</span> <span class="o">=</span> <span class="n">ISOTHERMAL_TEMPERATURE_IN_C</span>
    <span class="n">fuel</span><span class="o">.</span><span class="n">Thot</span> <span class="o">=</span> <span class="n">ISOTHERMAL_TEMPERATURE_IN_C</span>
    <span class="n">fuel</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="n">fuel</span><span class="o">.</span><span class="n">od</span> <span class="o">=</span> <span class="mf">0.4</span>

    <span class="n">clad</span> <span class="o">=</span> <span class="n">componentBlueprint</span><span class="o">.</span><span class="n">ComponentBlueprint</span><span class="p">()</span>
    <span class="n">clad</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;clad&quot;</span>
    <span class="n">clad</span><span class="o">.</span><span class="n">mult</span> <span class="o">=</span> <span class="s2">&quot;fuel.mult&quot;</span>
    <span class="n">clad</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span> <span class="s2">&quot;Circle&quot;</span>
    <span class="n">clad</span><span class="o">.</span><span class="n">material</span> <span class="o">=</span> <span class="s2">&quot;HT9&quot;</span>
    <span class="n">clad</span><span class="o">.</span><span class="n">Tinput</span> <span class="o">=</span> <span class="n">ISOTHERMAL_TEMPERATURE_IN_C</span>
    <span class="n">clad</span><span class="o">.</span><span class="n">Thot</span> <span class="o">=</span> <span class="n">ISOTHERMAL_TEMPERATURE_IN_C</span>
    <span class="n">clad</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="mf">0.508</span>
    <span class="n">clad</span><span class="o">.</span><span class="n">od</span> <span class="o">=</span> <span class="mf">0.5842</span>

    <span class="n">gap</span> <span class="o">=</span> <span class="n">componentBlueprint</span><span class="o">.</span><span class="n">ComponentBlueprint</span><span class="p">()</span>
    <span class="n">gap</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;gap&quot;</span>
    <span class="n">gap</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span> <span class="s2">&quot;Circle&quot;</span>
    <span class="n">gap</span><span class="o">.</span><span class="n">mult</span> <span class="o">=</span> <span class="s2">&quot;fuel.mult&quot;</span>
    <span class="n">gap</span><span class="o">.</span><span class="n">material</span> <span class="o">=</span> <span class="s2">&quot;Void&quot;</span>
    <span class="n">gap</span><span class="o">.</span><span class="n">Tinput</span> <span class="o">=</span> <span class="n">ISOTHERMAL_TEMPERATURE_IN_C</span>
    <span class="n">gap</span><span class="o">.</span><span class="n">Thot</span> <span class="o">=</span> <span class="n">ISOTHERMAL_TEMPERATURE_IN_C</span>
    <span class="n">gap</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="s2">&quot;fuel.od&quot;</span>
    <span class="n">gap</span><span class="o">.</span><span class="n">od</span> <span class="o">=</span> <span class="s2">&quot;clad.id&quot;</span>

    <span class="n">wire</span> <span class="o">=</span> <span class="n">componentBlueprint</span><span class="o">.</span><span class="n">ComponentBlueprint</span><span class="p">()</span>
    <span class="n">wire</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;wire&quot;</span>
    <span class="n">wire</span><span class="o">.</span><span class="n">mult</span> <span class="o">=</span> <span class="s2">&quot;fuel.mult&quot;</span>
    <span class="n">wire</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span> <span class="s2">&quot;Helix&quot;</span>
    <span class="n">wire</span><span class="o">.</span><span class="n">material</span> <span class="o">=</span> <span class="s2">&quot;HT9&quot;</span>
    <span class="n">wire</span><span class="o">.</span><span class="n">Tinput</span> <span class="o">=</span> <span class="n">ISOTHERMAL_TEMPERATURE_IN_C</span>
    <span class="n">wire</span><span class="o">.</span><span class="n">Thot</span> <span class="o">=</span> <span class="n">ISOTHERMAL_TEMPERATURE_IN_C</span>
    <span class="n">wire</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="n">wire</span><span class="o">.</span><span class="n">od</span> <span class="o">=</span> <span class="mf">0.14224</span>
    <span class="n">wire</span><span class="o">.</span><span class="n">axialPitch</span> <span class="o">=</span> <span class="mf">30.48</span>
    <span class="n">wire</span><span class="o">.</span><span class="n">helixDiameter</span> <span class="o">=</span> <span class="mf">0.72644</span>

    <span class="n">duct</span> <span class="o">=</span> <span class="n">componentBlueprint</span><span class="o">.</span><span class="n">ComponentBlueprint</span><span class="p">()</span>
    <span class="n">duct</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;duct&quot;</span>
    <span class="n">duct</span><span class="o">.</span><span class="n">mult</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">duct</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span> <span class="s2">&quot;Hexagon&quot;</span>
    <span class="n">duct</span><span class="o">.</span><span class="n">material</span> <span class="o">=</span> <span class="s2">&quot;HT9&quot;</span>
    <span class="n">duct</span><span class="o">.</span><span class="n">Tinput</span> <span class="o">=</span> <span class="n">ISOTHERMAL_TEMPERATURE_IN_C</span>
    <span class="n">duct</span><span class="o">.</span><span class="n">Thot</span> <span class="o">=</span> <span class="n">ISOTHERMAL_TEMPERATURE_IN_C</span>
    <span class="n">duct</span><span class="o">.</span><span class="n">ip</span> <span class="o">=</span> <span class="mf">11.0109</span>
    <span class="n">duct</span><span class="o">.</span><span class="n">op</span> <span class="o">=</span> <span class="mf">11.6205</span>

    <span class="n">intercoolant</span> <span class="o">=</span> <span class="n">componentBlueprint</span><span class="o">.</span><span class="n">ComponentBlueprint</span><span class="p">()</span>
    <span class="n">intercoolant</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;intercoolant&quot;</span>
    <span class="n">intercoolant</span><span class="o">.</span><span class="n">mult</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">intercoolant</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span> <span class="s2">&quot;Hexagon&quot;</span>
    <span class="n">intercoolant</span><span class="o">.</span><span class="n">material</span> <span class="o">=</span> <span class="s2">&quot;Sodium&quot;</span>
    <span class="n">intercoolant</span><span class="o">.</span><span class="n">Tinput</span> <span class="o">=</span> <span class="n">ISOTHERMAL_TEMPERATURE_IN_C</span>
    <span class="n">intercoolant</span><span class="o">.</span><span class="n">Thot</span> <span class="o">=</span> <span class="n">ISOTHERMAL_TEMPERATURE_IN_C</span>
    <span class="n">intercoolant</span><span class="o">.</span><span class="n">ip</span> <span class="o">=</span> <span class="s2">&quot;duct.op&quot;</span>
    <span class="n">intercoolant</span><span class="o">.</span><span class="n">op</span> <span class="o">=</span> <span class="mf">12.01420</span>

    <span class="n">coolant</span> <span class="o">=</span> <span class="n">componentBlueprint</span><span class="o">.</span><span class="n">ComponentBlueprint</span><span class="p">()</span>
    <span class="n">coolant</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;coolant&quot;</span>
    <span class="n">coolant</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span> <span class="s2">&quot;DerivedShape&quot;</span>
    <span class="n">coolant</span><span class="o">.</span><span class="n">material</span> <span class="o">=</span> <span class="s2">&quot;Sodium&quot;</span>
    <span class="n">coolant</span><span class="o">.</span><span class="n">Tinput</span> <span class="o">=</span> <span class="n">ISOTHERMAL_TEMPERATURE_IN_C</span>
    <span class="n">coolant</span><span class="o">.</span><span class="n">Thot</span> <span class="o">=</span> <span class="n">ISOTHERMAL_TEMPERATURE_IN_C</span>

    <span class="n">componentBlueprints</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">c</span><span class="o">.</span><span class="n">name</span><span class="p">:</span> <span class="n">c</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="p">[</span><span class="n">fuel</span><span class="p">,</span> <span class="n">gap</span><span class="p">,</span> <span class="n">clad</span><span class="p">,</span> <span class="n">wire</span><span class="p">,</span> <span class="n">duct</span><span class="p">,</span> <span class="n">intercoolant</span><span class="p">,</span> <span class="n">coolant</span><span class="p">]</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">componentBlueprints</span>


<span class="k">def</span> <span class="nf">buildBlocks</span><span class="p">(</span><span class="n">components</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Build block blueprints&quot;&quot;&quot;</span>
    <span class="n">blocks</span> <span class="o">=</span> <span class="n">blockBlueprint</span><span class="o">.</span><span class="n">BlockKeyedList</span><span class="p">()</span>
    <span class="n">fuel</span> <span class="o">=</span> <span class="n">blockBlueprint</span><span class="o">.</span><span class="n">BlockBlueprint</span><span class="p">()</span>
    <span class="n">fuel</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;fuel&quot;</span>
    <span class="k">for</span> <span class="n">cname</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">components</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">fuel</span><span class="p">[</span><span class="n">cname</span><span class="p">]</span> <span class="o">=</span> <span class="n">c</span>
    <span class="n">blocks</span><span class="p">[</span><span class="n">fuel</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">fuel</span>

    <span class="n">reflector</span> <span class="o">=</span> <span class="n">blockBlueprint</span><span class="o">.</span><span class="n">BlockBlueprint</span><span class="p">()</span>
    <span class="n">reflector</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;reflector&quot;</span>
    <span class="n">reflector</span><span class="p">[</span><span class="s2">&quot;coolant&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">components</span><span class="p">[</span><span class="s2">&quot;coolant&quot;</span><span class="p">]</span>
    <span class="n">reflector</span><span class="p">[</span><span class="s2">&quot;duct&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">components</span><span class="p">[</span><span class="s2">&quot;duct&quot;</span><span class="p">]</span>
    <span class="n">blocks</span><span class="p">[</span><span class="n">reflector</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">reflector</span>

    <span class="k">return</span> <span class="n">blocks</span>


<span class="k">def</span> <span class="nf">buildAssemblies</span><span class="p">(</span><span class="n">blockDesigns</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Build assembly blueprints&quot;&quot;&quot;</span>
    <span class="n">fuelBock</span><span class="p">,</span> <span class="n">reflectorBlock</span> <span class="o">=</span> <span class="n">blockDesigns</span><span class="p">[</span><span class="s2">&quot;fuel&quot;</span><span class="p">],</span> <span class="n">blockDesigns</span><span class="p">[</span><span class="s2">&quot;reflector&quot;</span><span class="p">]</span>

    <span class="n">assemblies</span> <span class="o">=</span> <span class="n">assemblyBlueprint</span><span class="o">.</span><span class="n">AssemblyKeyedList</span><span class="p">()</span>

    <span class="n">fuelAssem</span> <span class="o">=</span> <span class="n">assemblyBlueprint</span><span class="o">.</span><span class="n">AssemblyBlueprint</span><span class="p">()</span>
    <span class="n">fuelAssem</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Fuel&quot;</span>
    <span class="n">fuelAssem</span><span class="o">.</span><span class="n">specifier</span> <span class="o">=</span> <span class="s2">&quot;IC&quot;</span>

    <span class="n">fuelAssem</span><span class="o">.</span><span class="n">blocks</span> <span class="o">=</span> <span class="n">blockBlueprint</span><span class="o">.</span><span class="n">BlockList</span><span class="p">()</span>
    <span class="n">fuelAssem</span><span class="o">.</span><span class="n">blocks</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
        <span class="p">[</span><span class="n">reflectorBlock</span><span class="p">,</span> <span class="n">fuelBock</span><span class="p">,</span> <span class="n">fuelBock</span><span class="p">,</span> <span class="n">fuelBock</span><span class="p">,</span> <span class="n">reflectorBlock</span><span class="p">]</span>
    <span class="p">)</span>
    <span class="n">fuelAssem</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>
    <span class="n">fuelAssem</span><span class="o">.</span><span class="n">xsTypes</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">5</span>
    <span class="n">fuelAssem</span><span class="o">.</span><span class="n">axialMeshPoints</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="mi">5</span>

    <span class="n">assemblies</span><span class="p">[</span><span class="n">fuelAssem</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">fuelAssem</span>

    <span class="n">reflectorAssem</span> <span class="o">=</span> <span class="n">assemblyBlueprint</span><span class="o">.</span><span class="n">AssemblyBlueprint</span><span class="p">()</span>
    <span class="n">reflectorAssem</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Reflector&quot;</span>
    <span class="n">reflectorAssem</span><span class="o">.</span><span class="n">specifier</span> <span class="o">=</span> <span class="s2">&quot;RR&quot;</span>
    <span class="n">reflectorAssem</span><span class="o">.</span><span class="n">blocks</span> <span class="o">=</span> <span class="n">blockBlueprint</span><span class="o">.</span><span class="n">BlockList</span><span class="p">()</span>
    <span class="n">reflectorAssem</span><span class="o">.</span><span class="n">blocks</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">reflectorBlock</span><span class="p">]</span> <span class="o">*</span> <span class="mi">5</span><span class="p">)</span>
    <span class="n">reflectorAssem</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>
    <span class="n">reflectorAssem</span><span class="o">.</span><span class="n">xsTypes</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">5</span>
    <span class="n">reflectorAssem</span><span class="o">.</span><span class="n">axialMeshPoints</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="mi">5</span>
    <span class="n">assemblies</span><span class="p">[</span><span class="n">reflectorAssem</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">reflectorAssem</span>

    <span class="k">return</span> <span class="n">assemblies</span>


<span class="k">def</span> <span class="nf">buildGrids</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Build the core map grid&quot;&quot;&quot;</span>

    <span class="n">coreGrid</span> <span class="o">=</span> <span class="n">gridBlueprint</span><span class="o">.</span><span class="n">GridBlueprint</span><span class="p">(</span><span class="s2">&quot;core&quot;</span><span class="p">)</span>
    <span class="n">coreGrid</span><span class="o">.</span><span class="n">geom</span> <span class="o">=</span> <span class="s2">&quot;hex&quot;</span>
    <span class="n">coreGrid</span><span class="o">.</span><span class="n">symmetry</span> <span class="o">=</span> <span class="s2">&quot;third periodic&quot;</span>
    <span class="n">coreGrid</span><span class="o">.</span><span class="n">origin</span> <span class="o">=</span> <span class="n">gridBlueprint</span><span class="o">.</span><span class="n">Triplet</span><span class="p">()</span>

    <span class="n">coreGrid</span><span class="o">.</span><span class="n">latticeMap</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">         RR   RR</span>
<span class="s2">           IC   RR</span>
<span class="s2">         IC   IC   RR&quot;&quot;&quot;</span>

    <span class="n">grids</span> <span class="o">=</span> <span class="n">gridBlueprint</span><span class="o">.</span><span class="n">Grids</span><span class="p">()</span>
    <span class="n">grids</span><span class="p">[</span><span class="s2">&quot;core&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">coreGrid</span>
    <span class="k">return</span> <span class="n">grids</span>


<span class="k">def</span> <span class="nf">buildSystems</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Build the core system&quot;&quot;&quot;</span>
    <span class="n">systems</span> <span class="o">=</span> <span class="n">reactorBlueprint</span><span class="o">.</span><span class="n">Systems</span><span class="p">()</span>
    <span class="n">core</span> <span class="o">=</span> <span class="n">reactorBlueprint</span><span class="o">.</span><span class="n">SystemBlueprint</span><span class="p">(</span><span class="s2">&quot;core&quot;</span><span class="p">,</span> <span class="s2">&quot;core&quot;</span><span class="p">,</span> <span class="n">gridBlueprint</span><span class="o">.</span><span class="n">Triplet</span><span class="p">())</span>
    <span class="n">systems</span><span class="p">[</span><span class="s2">&quot;core&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">core</span>
    <span class="k">return</span> <span class="n">systems</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">case</span> <span class="o">=</span> <span class="n">buildCase</span><span class="p">()</span>
    <span class="c1"># build ARMI objects</span>
    <span class="n">o</span> <span class="o">=</span> <span class="n">case</span><span class="o">.</span><span class="n">initializeOperator</span><span class="p">()</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">plotting</span><span class="o">.</span><span class="n">plotAssemblyTypes</span><span class="p">(</span>
        <span class="n">case</span><span class="o">.</span><span class="n">bp</span><span class="p">,</span>
        <span class="kc">None</span><span class="p">,</span>
        <span class="n">showBlockAxMesh</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

    <span class="c1"># also write input files</span>
    <span class="n">case</span><span class="o">.</span><span class="n">writeInputs</span><span class="p">()</span>
</pre></div>
</div>
<p class="sphx-glr-timing"><strong>Total running time of the script:</strong> ( 0 minutes  1.516 seconds)</p>
<div class="sphx-glr-footer class sphx-glr-footer-example docutils container" id="sphx-glr-download-gallery-framework-run-programmaticreactordefinition-py">
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/cff35a4c9ed9bc4dc730a54223d09a48/run_programmaticReactorDefinition.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">run_programmaticReactorDefinition.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/65b15e5869b7f0f2c596ced18e80e6fb/run_programmaticReactorDefinition.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">run_programmaticReactorDefinition.ipynb</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="run_reactorFacemap.html" class="btn btn-neutral float-right" title="Plot a reactor facemap" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="run_materials.html" class="btn btn-neutral float-left" title="Listing of Material Library" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2009-2020, TerraPower, LLC
      <span class="lastupdated">
        Last updated on 2020-12-16.
      </span>

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>