

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta property="og:title" content="2.2.2. Hex block to RZ geometry conversion" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://terrapower.github.io/armi/user/_gallery/analysis/run_hexBlockToRZConversion.html" />
  <meta property="og:site_name" content="Advanced Reactor Modeling Interface" />
  <meta property="og:description" content="Often, parts of a reactor model must be transformed to a different geometry in order to perform a certain type of physics calculation. For example, in some fast reactor lattice physics calculations..." />
  <meta property="og:image" content="https://terrapower.github.io/armi/_static/armiSchematicView.png" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>2.2.2. Hex block to RZ geometry conversion &mdash; ARMI 0.1.4 documentation</title>
  

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/theme_fixes.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/gallery-binder.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/gallery-dataframe.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../../_static/armiicon_16x16.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="2.2.3. Hex reactor to RZ geometry conversion" href="run_hexReactorToRZ.html" />
    <link rel="prev" title="2.2.1. Write MCNP Material Cards" href="run_blockMcnpMaterialCard.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home" alt="Documentation Home"> ARMI
          

          
            
            <img src="../../../_static/armiicon_24x24.ico" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.1.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../intro.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../user_install.html">1. Installation</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">2. Gallery</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../index.html#framework">2.1. Framework</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../index.html#analysis">2.2. Analysis</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="run_blockMcnpMaterialCard.html">2.2.1. Write MCNP Material Cards</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">2.2.2. Hex block to RZ geometry conversion</a></li>
<li class="toctree-l4"><a class="reference internal" href="run_hexReactorToRZ.html">2.2.3. Hex reactor to RZ geometry conversion</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../index.html#applications">2.3. Applications</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorials/index.html">3. Guided Tutorials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../inputs/index.html">4. Inputs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../outputs/index.html">5. Outputs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../manual_data_access.html">6. Accessing Data in ARMI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reactor_parameters_report.html">7. Reactor Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../core_parameters_report.html">8. Core Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../assembly_parameters_report.html">9. Assembly Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../block_parameters_report.html">10. Block Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../assorted_guide.html">11. Branch Searching</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../assorted_guide.html#physics-coupling">12. Physics Coupling</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../developer/index.html">Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../release/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../.apidocs/modules.html">API Docs</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">ARMI</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../index.html">User Guide</a> &raquo;</li>
        
          <li><a href="../index.html"><span class="section-number">2. </span>Gallery</a> &raquo;</li>
        
      <li><span class="section-number">2.2.2. </span>Hex block to RZ geometry conversion</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/user/_gallery/analysis/run_hexBlockToRZConversion.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p>Click <a class="reference internal" href="#sphx-glr-download-user-gallery-analysis-run-hexblocktorzconversion-py"><span class="std std-ref">here</span></a>     to download the full example code</p>
</div>
<div class="sphx-glr-example-title section" id="hex-block-to-rz-geometry-conversion">
<span id="sphx-glr-user-gallery-analysis-run-hexblocktorzconversion-py"></span><h1><span class="section-number">2.2.2. </span>Hex block to RZ geometry conversion<a class="headerlink" href="#hex-block-to-rz-geometry-conversion" title="Permalink to this headline">Â¶</a></h1>
<p>Often, parts of a reactor model must be transformed to a different geometry in order to
perform a certain type of physics calculation. For example, in some fast reactor lattice
physics calculations, detailed descriptions of control assemblies must be mapped to
equivalent 1-D cylindrical models.</p>
<p>This example shows how a control assembly defined in full hex-pin detail can be
automatically converted to an equivalent 1-D RZ case, including an outer ring of fuel to
drive the case.</p>
<p>This conversion includes rings for control material, gap, cladding (on both sides of each
ring of control material), coolant, duct, and fuel. The color of the plot is proportional
to the mass density.</p>
<p>Given this transformation, a 1-D lattice physics solver can be executed to compute
accurate cross sections.</p>
<p>By automating these kinds of geometry conversions, ARMI allows core designers to maintain
the design in real geometry while still performing appropriate approximations for
efficient analysis.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This uses <a class="reference internal" href="../../../.apidocs/armi.reactor.converters.blockConverters.html#module-armi.reactor.converters.blockConverters" title="armi.reactor.converters.blockConverters"><code class="xref py py-mod docutils literal notranslate"><span class="pre">armi.reactor.converters.blockConverters</span></code></a>, which
currently only works on a constrained set of hex-based geometries. For your systems,
consider these an example and starting point and build your own converters as
appropriate.</p>
</div>
<img alt="run hexBlockToRZConversion" class="sphx-glr-single-img" src="../../../_images/sphx_glr_run_hexBlockToRZConversion_001.png" />
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="kn">from</span> <span class="nn">armi.reactor.tests</span> <span class="k">import</span> <span class="n">test_reactors</span>
 <span class="kn">from</span> <span class="nn">armi.reactor.flags</span> <span class="k">import</span> <span class="n">Flags</span>
 <span class="kn">from</span> <span class="nn">armi.reactor.converters</span> <span class="k">import</span> <span class="n">blockConverters</span>
 <span class="kn">import</span> <span class="nn">armi</span>

 <span class="n">armi</span><span class="o">.</span><span class="n">configure</span><span class="p">()</span>

 <span class="n">_o</span><span class="p">,</span> <span class="n">r</span> <span class="o">=</span> <span class="n">test_reactors</span><span class="o">.</span><span class="n">loadTestReactor</span><span class="p">()</span>

 <span class="n">bFuel</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">getBlocks</span><span class="p">(</span><span class="n">Flags</span><span class="o">.</span><span class="n">FUEL</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
 <span class="n">bControl</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">getBlocks</span><span class="p">(</span><span class="n">Flags</span><span class="o">.</span><span class="n">CONTROL</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
 <span class="n">converter</span> <span class="o">=</span> <span class="n">blockConverters</span><span class="o">.</span><span class="n">HexComponentsToCylConverter</span><span class="p">(</span>
     <span class="n">sourceBlock</span><span class="o">=</span><span class="n">bControl</span><span class="p">,</span> <span class="n">driverFuelBlock</span><span class="o">=</span><span class="n">bFuel</span><span class="p">,</span> <span class="n">numExternalRings</span><span class="o">=</span><span class="mi">1</span>
 <span class="p">)</span>
 <span class="n">converter</span><span class="o">.</span><span class="n">convert</span><span class="p">()</span>
 <span class="n">converter</span><span class="o">.</span><span class="n">plotConvertedBlock</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<p class="sphx-glr-timing"><strong>Total running time of the script:</strong> ( 0 minutes  2.036 seconds)</p>
<div class="sphx-glr-footer class sphx-glr-footer-example docutils container" id="sphx-glr-download-user-gallery-analysis-run-hexblocktorzconversion-py">
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../../../_downloads/fef609f3d7bc635b39c8ba581372ca4c/run_hexBlockToRZConversion.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">run_hexBlockToRZConversion.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../../../_downloads/b7ed9fa345c4314423f94c0daa20b388/run_hexBlockToRZConversion.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">run_hexBlockToRZConversion.ipynb</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="run_hexReactorToRZ.html" class="btn btn-neutral float-right" title="2.2.3. Hex reactor to RZ geometry conversion" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="run_blockMcnpMaterialCard.html" class="btn btn-neutral float-left" title="2.2.1. Write MCNP Material Cards" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2009-2020, TerraPower, LLC
      <span class="lastupdated">
        Last updated on 2020-08-14.
      </span>

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>